<!DOCTYPE html>
<html>
    <head>
        <meta charset = "UTF-8">
        <title>Etch-a-Sketch</title>
        <link rel = 'stylesheet' href = 'style.css'>
    </head>
    <body>
      <div class = 'banner'>Etch-a-Sketch-a</div> 
      <div id = 'container'></div>   
      <div class = 'game'><button id = 'new'>New Grid</button><button id = 'rainbow'>Rainbow</button></div>

      
   </body>

      <script>
         
         function grid() {
            var dimensions = prompt('Choose a number between 1 and 100');

            while (dimensions > 100 || dimensions < 1){
               dimensions = prompt('Try to choose a number between 1 and 100');
            }; 

            const container = document.querySelector('#container');
            const containerHeight = container.offsetHeight-8; 
            
            for (let i = 0; i < dimensions; i ++){
               const row = document.createElement('div');   
               for (let j = 0; j < dimensions; j++){
                  var box = document.createElement('div');
                  box.classList.add('box');
                  box.setAttribute('style', 'height:' + containerHeight/dimensions + 'px; width:' +  containerHeight/dimensions + 'px;');
                  row.appendChild(box);
               };

               row.classList.add('row');
               row.setAttribute('style', 'width:' +  containerHeight+ 'px; height:' + containerHeight/dimensions + 'px;');
               container.appendChild(row);
            }; 

            var boxes = Array.from(document.querySelectorAll('.box'));
            var rows = Array.from(document.querySelectorAll('.row'));

            function addEventListenerList(color, list){
               for (let i = 0; i < list.length; i++){
                  list[i].addEventListener('click', ()=>{
                     list[i].setAttribute('style', 'background-color:' +  color + '; height:' + containerHeight/dimensions + 'px; width:' +  containerHeight/dimensions + 'px;');
                  });
               };

               for (let j = 0; j < list.length; j++ ){
                  list[j].addEventListener('mouseover', ()=>{
                     list[j].setAttribute('style', 'background-color:' +  color + '; height:' + containerHeight/dimensions + 'px; width:' +  containerHeight/dimensions + 'px;');
                  });
               };
            };
            
            // generate 3 random numbers: 
            
            var rainbow = document.querySelector('#rainbow'); 


            let x = Math.floor(256*Math.random());
            let y = Math.floor(256*Math.random());
            let z = Math.floor(256*Math.random());

            rainbow.addEventListener('click', ()=>{
               addEventListenerList('rgb(x,y,z)', boxes);
            });


            console.log(x);
            console.log(y);
            console.log(z);

            addEventListenerList('black', boxes);      
         
         };

         var newGrid = document.querySelector('#new');
         newGrid.addEventListener('click', ()=>{
            var boxes = Array.from(document.querySelectorAll('.box'));
            var rows = Array.from(document.querySelectorAll('.row')); 
      
               boxes.forEach((box)=>{
                  box.remove();
               });

               rows.forEach((row)=>{
                  row.remove();
               });
               grid();
            });

            grid(); 

            
      
     </script>
    
</html>  